<?xml version="1.0" encoding="UTF-8"?>
<Defs>
    <QuestScriptDef>
        <defName>VFED_AerodroneStation</defName>
	    <rootSelectionWeight>2</rootSelectionWeight>
	    <expireDaysRange>15~30</expireDaysRange>
	    <questNameRules>
		    <rulesStrings>
			    <li>questName->Aerodrone Station Sabotage</li>
		    </rulesStrings>
	    </questNameRules>
	    <questDescriptionRules>
		    <rulesStrings>
			    <li>questDescription->Thanks to the intel we have obtained, we now know the location of an aerodrone station belonging to [empire_name]. These stations recharge and reload powerful aerodrones - autonomous, unmanned aerial vehicles that can bombard targets with powerful missile salvos.
\nThese drones are a threat to everyone who disagrees with the Empire. They need to be destroyed.
\nWe might find some useful supplies scattered around the station. It's crucial to remember that ammunition stacks and aerodrone batteries are highly volatile, and we might be able to use them to our advantage.
\nThe aerodrone station is protected by:
[forces_description]
\nWe have also been informed that the location is protected by a number of ground-mounted striker turrets. Despite the limited range, these turrets can easily reveal our approach and provide covering fire for the imperial army.
\nThe station is protected by surveillance pillars. They should not be approached, and instead should be disabled from afar - either by destroying them, or cutting off their power. Once activated, they will greatly increase our visibility.
\nThe objective of this assignment is to open all supply crates in the area. Once that is done, the reward will arrive and we will have to make our escape.
\nOnce we arrive at the station, we can expect an imperial response if our visibility is high enough. We will only have a limited amount of time to complete the mission.</li>
		    </rulesStrings>
	    </questDescriptionRules>
	    <root Class="QuestNode_Sequence">
		    <nodes>
			    <li Class="VFED.QuestNode_GetEmpire">
				    <storeAs>empire</storeAs>
			    </li>
			    <li Class="VFED.QuestNode_GetDeserters">
				    <storeAs>deserters</storeAs>
			    </li>
				<li Class="QuestNode_GetMap" />
			    <li Class="QuestNode_SubScript">
				    <def>Util_RandomizePointsChallengeRating</def>
			    </li>
			    <li Class="QuestNode_SubScript">
				    <def>Util_AdjustPointsForDistantFight</def>
			    </li>
			    <li Class="QuestNode_GetSiteTile">
				    <storeAs>siteTile</storeAs>
				    <preferCloserTiles>true</preferCloserTiles>
			    </li>
			    <li Class="QuestNode_GetDefaultSitePartsParams">
				    <tile>$siteTile</tile>
				    <faction>$empire</faction>
				    <sitePartDefs><li>VFED_AerodroneStation</li></sitePartDefs>
				    <storeSitePartsParamsAs>sitePartsParams</storeSitePartsParamsAs>
			    </li>
			    <li Class="QuestNode_GetSiteThreatPoints">
				    <storeAs>sitePoints</storeAs>
				    <sitePartsParams>$sitePartsParams</sitePartsParams>
			    </li>
			    <li Class="QuestNode_SubScript">
				    <def>Util_GetDefaultRewardValueFromPoints</def>
				    <parms>
					    <points>$sitePoints</points>
				    </parms>
			    </li>
			    <li Class="QuestNode_Multiply">
				    <value1>$rewardValue</value1>
				    <value2>2.5</value2>
				    <storeAs>rewardValue</storeAs>
			    </li>
			    <li Class="QuestNode_SubScript">
				    <def>Util_GenerateSite</def>
			    </li>
			    <li Class="QuestNode_SpawnWorldObjects">
				    <worldObjects>$site</worldObjects>
			    </li>
				<li Class="VFED.QuestNode_MarkObjectives">
					<inSignal>site.MapGenerated</inSignal>
					<mapParent>$site</mapParent>
					<objectiveDef>VFED_Aerodrone</objectiveDef>
					<objectiveCompleteSignal>Destroyed</objectiveCompleteSignal>
				</li>
				<li Class="VFED.QuestNode_ImperialForces">
					<inSignal>site.MapGenerated</inSignal>
					<mapParent>$site</mapParent>
					<points>$points</points>
				</li>
				<li Class="VFED.QuestNode_ImperialResponse">
					<inSignal>site.MapGenerated</inSignal>
					<mapParent>$site</mapParent>
				</li>
			    <li Class="VFED.QuestNode_DeserterRewards">
					<inSignal>objectives.Complete</inSignal>
			    </li>
				<li Class="QuestNode_End">
					<inSignal>objectives.Complete</inSignal>
					<outcome>Success</outcome>
					<sendLetter>true</sendLetter>
				</li>
				<li Class="QuestNode_End">
					<inSignal>site.Destroyed</inSignal>
					<outcome>Fail</outcome>
					<sendLetter>true</sendLetter>
				</li>
		    </nodes>
	    </root>
    </QuestScriptDef>
</Defs>