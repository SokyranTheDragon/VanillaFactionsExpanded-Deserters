<?xml version="1.0" encoding="UTF-8"?>
<Defs>
    <QuestScriptDef>
        <defName>VFED_ControlStationRaid</defName>
	    <rootSelectionWeight>2</rootSelectionWeight>
	    <expireDaysRange>15~30</expireDaysRange>
	    <questNameRules>
		    <rulesStrings>
			    <li>questName->Control Station Raid</li>
		    </rulesStrings>
	    </questNameRules>
	    <questDescriptionRules>
		    <rulesStrings>
			    <li>questDescription->The informant network has relayed us the information of a control station belonging to [empire_name]. These forward-placed outposts survey the area around imperial points of interest and alert them of any imminent threat.
\nWe might find some useful supplies scattered around the staging post. If we have the time, we should take what we can.
\nThe control station is protected by:
[forces_description]
\nWe have also been informed that the location is protected by a number of ground-mounted striker turrets. Despite the limited range, these turrets can easily reveal our approach and provide covering fire for the imperial army.
\nThe staging post is protected by a large number of surveillance pillars. They should not be approached, and instead should be disabled from afar - either by destroying them, or cutting off their power. Once activated, they will greatly increase our visibility.
\nThe objective of this assignment is to destroy the surveillance station terminal. Once that is done, the reward will arrive and we will have to make our escape.
\nOnce we arrive at the control station, we can expect an imperial response if our visibility is high enough. We will only have a limited amount of time to complete the mission.</li>
		    </rulesStrings>
	    </questDescriptionRules>
	    <root Class="QuestNode_Sequence">
		    <nodes>
			    <li Class="VFED.QuestNode_GetEmpire">
				    <storeAs>empire</storeAs>
			    </li>
			    <li Class="VFED.QuestNode_GetDeserters">
				    <storeAs>deserters</storeAs>
			    </li>
				<li Class="QuestNode_GetMap" />
			    <li Class="QuestNode_SubScript">
				    <def>Util_RandomizePointsChallengeRating</def>
			    </li>
			    <li Class="QuestNode_SubScript">
				    <def>Util_AdjustPointsForDistantFight</def>
			    </li>
			    <li Class="QuestNode_GetSiteTile">
				    <storeAs>siteTile</storeAs>
				    <preferCloserTiles>true</preferCloserTiles>
			    </li>
			    <li Class="QuestNode_GetDefaultSitePartsParams">
				    <tile>$siteTile</tile>
				    <faction>$empire</faction>
				    <sitePartDefs><li>VFED_ControlStation</li></sitePartDefs>
				    <storeSitePartsParamsAs>sitePartsParams</storeSitePartsParamsAs>
			    </li>
				<li Class="QuestNode_Set">
					<name>siteFaction</name>
					<value>$empire</value>
				</li>
			    <li Class="QuestNode_GetSiteThreatPoints">
				    <storeAs>sitePoints</storeAs>
				    <sitePartsParams>$sitePartsParams</sitePartsParams>
			    </li>
			    <li Class="QuestNode_SubScript">
				    <def>Util_GetDefaultRewardValueFromPoints</def>
			    </li>
			    <li Class="QuestNode_Multiply">
				    <value1>$rewardValue</value1>
				    <value2>1.25</value2>
				    <storeAs>rewardValue</storeAs>
			    </li>
			    <li Class="QuestNode_Multiply">
				    <value1>$rewardValue</value1>
				    <value2>2.5</value2>
				    <storeAs>rewardValue</storeAs>
			    </li>
			    <li Class="QuestNode_SubScript">
				    <def>Util_GenerateSite</def>
			    </li>
			    <li Class="QuestNode_SpawnWorldObjects">
				    <worldObjects>$site</worldObjects>
			    </li>
				<li Class="VFED.QuestNode_MarkObjectives">
					<inSignal>site.MapGenerated</inSignal>
					<mapParent>$site</mapParent>
					<objectiveDef>VFED_SurveillanceStation</objectiveDef>
					<objectiveCompleteSignal>Destroyed</objectiveCompleteSignal>
				</li>
				<li Class="VFED.QuestNode_ImperialForces">
					<inSignal>site.MapGenerated</inSignal>
					<mapParent>$site</mapParent>
					<points>$points</points>
				</li>
				<li Class="VFED.QuestNode_ImperialResponse">
					<siteName>site</siteName>
				</li>
				<li Class="VFECore.QuestNode_ForceMusic">
					<inSignalEnable>site.MapGenerated</inSignalEnable>
					<inSignalDisable>site.MapRemoved</inSignalDisable>
					<possibleSongs>
						<li>VFED_Stealth1</li>
						<li>VFED_Stealth2</li>
						<li>VFED_Stealth3</li>
					</possibleSongs>
					<priority>2</priority>
				</li>
			    <li Class="VFED.QuestNode_DeserterRewards">
					<inSignal>objectives.Complete</inSignal>
			    </li>
				<li Class="QuestNode_End">
					<inSignal>objectives.Complete</inSignal>
					<outcome>Success</outcome>
					<sendStandardLetter>true</sendStandardLetter>
				</li>
				<li Class="QuestNode_End">
					<inSignal>site.Destroyed</inSignal>
					<outcome>Fail</outcome>
					<sendStandardLetter>true</sendStandardLetter>
				</li>
		    </nodes>
	    </root>
    </QuestScriptDef>
</Defs>